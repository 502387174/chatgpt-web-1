import{ag as se,ah as pe,h as x,r as C,ai as ve,aj as me,d as V,ak as he,al as ge,am as T,l as N,u as ne,an as U,$ as J,ao as ye,t as H,ap as _e,aq as X,ar as be,as as Se,at as xe,au as we,av as Y,c as K,a as O,aw as Re,ax as Z,g as ae,ay as Ce,az as $e,i as ke,aA as Ne,aB as Be,T as Ge,a2 as ze,A as Ie,O as Ee,a1 as ie,B as A,C as Q,J as r,ab as S,Q as R,D as c,S as v,N as oe,W as h,ac as M,R as le,_ as j,aC as Te,I as re,a8 as ce,aD as De,aE as Oe,P as F,F as q,aF as Me,aG as je,aH as Ae,aI as Ve,aJ as Le,aK as ee,aL as Pe,aM as Ue}from"./index-c4a45417.js";function Fe(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(t=>{if(t==="")return;const[a,i]=t.split(":");i===void 0?n[""]=a:n[a]=i}),n}function L(e,n){var t;if(e==null)return;const a=Fe(e);if(n===void 0)return a[""];if(typeof n=="string")return(t=a[n])!==null&&t!==void 0?t:a[""];if(Array.isArray(n)){for(let i=n.length-1;i>=0;--i){const s=n[i];if(s in a)return a[s]}return a[""]}else{let i,s=-1;return Object.keys(a).forEach(o=>{const l=Number(o);!Number.isNaN(l)&&n>=l&&l>=s&&(s=l,i=a[o])}),i}}function We(e){var n;const t=(n=e.dirs)===null||n===void 0?void 0:n.find(({dir:a})=>a===se);return!!(t&&t.value===!1)}const Qe={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function qe(e){return`(min-width: ${e}px)`}const P={};function Je(e=Qe){if(!pe)return x(()=>[]);if(typeof window.matchMedia!="function")return x(()=>[]);const n=C({}),t=Object.keys(e),a=(i,s)=>{i.matches?n.value[s]=!0:n.value[s]=!1};return t.forEach(i=>{const s=e[i];let o,l;P[s]===void 0?(o=window.matchMedia(qe(s)),o.addEventListener?o.addEventListener("change",m=>{l.forEach(f=>{f(m,i)})}):o.addListener&&o.addListener(m=>{l.forEach(f=>{f(m,i)})}),l=new Set,P[s]={mql:o,cbs:l}):(o=P[s].mql,l=P[s].cbs),l.add(a),o.matches&&l.forEach(m=>{m(o,i)})}),ve(()=>{t.forEach(i=>{const{cbs:s}=P[e[i]];s.has(a)&&s.delete(a)})}),x(()=>{const{value:i}=n;return t.filter(s=>i[s])})}const te=1,ue=me("n-grid"),de=1,He={span:{type:[Number,String],default:de},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},Xe=V({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:He,setup(){const{isSsrRef:e,xGapRef:n,itemStyleRef:t,overflowRef:a,layoutShiftDisabledRef:i}=he(ue),s=ge();return{overflow:a,itemStyle:t,layoutShiftDisabled:i,mergedXGap:x(()=>T(n.value||0)),deriveStyle:()=>{e.value;const{privateSpan:o=de,privateShow:l=!0,privateColStart:m=void 0,privateOffset:f=0}=s.vnode.props,{value:$}=n,y=T($||0);return{display:l?"":"none",gridColumn:`${m??`span ${o}`} / span ${o}`,marginLeft:f?`calc((100% - (${o} - 1) * ${y}) / ${o} * ${f} + ${y} * ${f})`:""}}}},render(){var e,n;if(this.layoutShiftDisabled){const{span:t,offset:a,mergedXGap:i}=this;return N("div",{style:{gridColumn:`span ${t} / span ${t}`,marginLeft:a?`calc((100% - (${t} - 1) * ${i}) / ${t} * ${a} + ${i} * ${a})`:""}},this.$slots)}return N("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}}),Ye={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},fe=24,W="__ssr__",Ke={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:fe},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},Ze=V({name:"Grid",inheritAttrs:!1,props:Ke,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:t}=ne(e),a=/^\d+$/,i=C(void 0),s=Je((t==null?void 0:t.value)||Ye),o=U(()=>!!(e.itemResponsive||!a.test(e.cols.toString())||!a.test(e.xGap.toString())||!a.test(e.yGap.toString()))),l=x(()=>{if(o.value)return e.responsive==="self"?i.value:s.value}),m=U(()=>{var b;return(b=Number(L(e.cols.toString(),l.value)))!==null&&b!==void 0?b:fe}),f=U(()=>L(e.xGap.toString(),l.value)),$=U(()=>L(e.yGap.toString(),l.value)),y=b=>{i.value=b.contentRect.width},_=b=>{Se(y,b)},B=C(!1),G=x(()=>{if(e.responsive==="self")return _}),w=C(!1),z=C();return J(()=>{const{value:b}=z;b&&b.hasAttribute(W)&&(b.removeAttribute(W),w.value=!0)}),ye(ue,{layoutShiftDisabledRef:H(e,"layoutShiftDisabled"),isSsrRef:w,itemStyleRef:H(e,"itemStyle"),xGapRef:f,overflowRef:B}),{isSsr:!_e,contentEl:z,mergedClsPrefix:n,style:x(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:T(e.xGap),rowGap:T(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${m.value}, minmax(0, 1fr))`,columnGap:T(f.value),rowGap:T($.value)}),isResponsive:o,responsiveQuery:l,responsiveCols:m,handleResize:G,overflow:B}},render(){if(this.layoutShiftDisabled)return N("div",X({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var n,t,a,i,s,o,l;this.overflow=!1;const m=xe(we(this)),f=[],{collapsed:$,collapsedRows:y,responsiveCols:_,responsiveQuery:B}=this;m.forEach(u=>{var d,g,p,k;if(((d=u==null?void 0:u.type)===null||d===void 0?void 0:d.__GRID_ITEM__)!==!0)return;if(We(u)){const D=Y(u);D.props?D.props.privateShow=!1:D.props={privateShow:!1},f.push({child:D,rawChildSpan:0});return}u.dirs=((g=u.dirs)===null||g===void 0?void 0:g.filter(({dir:D})=>D!==se))||null;const E=Y(u),I=Number((k=L((p=E.props)===null||p===void 0?void 0:p.span,B))!==null&&k!==void 0?k:te);I!==0&&f.push({child:E,rawChildSpan:I})});let G=0;const w=(n=f[f.length-1])===null||n===void 0?void 0:n.child;if(w!=null&&w.props){const u=(t=w.props)===null||t===void 0?void 0:t.suffix;u!==void 0&&u!==!1&&(G=(i=(a=w.props)===null||a===void 0?void 0:a.span)!==null&&i!==void 0?i:te,w.props.privateSpan=G,w.props.privateColStart=_+1-G,w.props.privateShow=(s=w.props.privateShow)!==null&&s!==void 0?s:!0)}let z=0,b=!1;for(const{child:u,rawChildSpan:d}of f){if(b&&(this.overflow=!0),!b){const g=Number((l=L((o=u.props)===null||o===void 0?void 0:o.offset,B))!==null&&l!==void 0?l:0),p=Math.min(d+g,_);if(u.props?(u.props.privateSpan=p,u.props.privateOffset=g):u.props={privateSpan:p,privateOffset:g},$){const k=z%_;p+k>_&&(z+=_-k),p+z+G>y*_?b=!0:z+=p}}b&&(u.props?u.props.privateShow!==!0&&(u.props.privateShow=!1):u.props={privateShow:!1})}return N("div",X({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[W]:this.isSsr||void 0},this.$attrs),f.map(({child:u})=>u))};return this.isResponsive&&this.responsive==="self"?N(be,{onResize:this.handleResize},{default:e}):e()}}),et=K([K("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),O("spin-container",{position:"relative"},[O("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Re()])]),O("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),O("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[Z("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),O("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),O("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[Z("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),tt={small:20,medium:18,large:16},st=Object.assign(Object.assign({},ae.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),nt=V({name:"Spin",props:st,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:t}=ne(e),a=ae("Spin","-spin",et,Ce,e,n),i=x(()=>{const{size:o}=e,{common:{cubicBezierEaseInOut:l},self:m}=a.value,{opacitySpinning:f,color:$,textColor:y}=m,_=typeof o=="number"?T(o):m[$e("size",o)];return{"--n-bezier":l,"--n-opacity-spinning":f,"--n-size":_,"--n-color":$,"--n-text-color":y}}),s=t?ke("spin",x(()=>{const{size:o}=e;return typeof o=="number"?String(o):o[0]}),i,e):void 0;return{mergedClsPrefix:n,compitableShow:Ne(e,["spinning","show"]),mergedStrokeWidth:x(()=>{const{strokeWidth:o}=e;if(o!==void 0)return o;const{size:l}=e;return tt[typeof l=="number"?"medium":l]}),cssVars:t?void 0:i,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var e,n;const{$slots:t,mergedClsPrefix:a,description:i}=this,s=t.icon&&this.rotate,o=(i||t.description)&&N("div",{class:`${a}-spin-description`},i||((e=t.description)===null||e===void 0?void 0:e.call(t))),l=t.icon?N("div",{class:[`${a}-spin-body`,this.themeClass]},N("div",{class:[`${a}-spin`,s&&`${a}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),o):N("div",{class:[`${a}-spin-body`,this.themeClass]},N(Be,{clsPrefix:a,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),o);return(n=this.onRender)===null||n===void 0||n.call(this),t.default?N("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},N("div",{class:[`${a}-spin-content`,this.compitableShow&&`${a}-spin-content--spinning`]},t),N(Ge,{name:"fade-in-transition"},{default:()=>this.compitableShow?l:null})):l}});function at(){const e=new Date,n=e.getDate(),t=e.getMonth()+1;return`${e.getFullYear()}-${t}-${n}`}const it={class:"p-4 space-y-5 min-h-[200px]"},ot={class:"space-y-6"},lt={class:"flex items-center"},rt={class:"text-red-600"},ct={class:"text-red-600"},ut={class:"text-green-600"},dt={class:"text-green-600"},ft={class:"text-green-600"},pt=r("div",{class:"flex items-center hidden"},[r("span",null,[S("🧑‍🤝‍🧑 邀请您的朋友注册您和他都可以获得 "),r("span",{class:"text-green-600"},"10"),S(" 次免费次数。您的邀请链接为（可直接点击复制）："),r("a",{href:"",class:"text-green-600"},"https://xxx.com/auth?type=register&invite=NjI2MA"),S(" （⚠ 若系统检测到您自己邀请自己，则不会发送奖励 ）")])],-1),vt={class:"flex items-center space-x-4"},mt=r("span",{class:"flex-shrink-0 w-[100px]"},"用户昵称",-1),ht={class:"w-[200px]"},gt={class:"flex-shrink-0 w-[100px]"},yt={class:"flex flex-wrap items-center gap-4"},_t={class:"flex items-center space-x-4"},bt=r("span",{class:"flex-shrink-0 w-[100px]"},"设置主题",-1),St={class:"flex flex-wrap items-center gap-4"},xt={class:"flex items-center space-x-4"},wt=r("span",{class:"flex-shrink-0 w-[100px]"},"设置语言",-1),Rt={class:"flex flex-wrap items-center gap-4"},Ct=V({__name:"General",setup(e){const n=ze(),t=Ie(),{isMobile:a}=Ee(),i=ie(),s=C({}),o=C(!1);async function l(){try{o.value=!0;const{data:d}=await Oe();s.value=d}finally{o.value=!1}}J(()=>{l()});const m=x(()=>n.theme),f=x(()=>t.userInfo),$=C(f.value.name??""),y=x({get(){return n.language},set(d){n.setLanguage(d)}}),_=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],B=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function G(d){t.updateUserInfo(d),i.success(F("common.success"))}function w(){const d=at(),g=localStorage.getItem("chatStorage")||"{}",p=JSON.stringify(JSON.parse(g),null,2),k=new Blob([p],{type:"application/json"}),E=URL.createObjectURL(k),I=document.createElement("a");I.href=E,I.download=`chat-store_${d}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I)}function z(d){const g=d.target;if(!g||!g.files)return;const p=g.files[0];if(!p)return;const k=new FileReader;k.onload=()=>{try{const E=JSON.parse(k.result);localStorage.setItem("chatStorage",JSON.stringify(E)),i.success(F("common.success")),location.reload()}catch{i.error(F("common.invalidFileFormat"))}},k.readAsText(p)}function b(){localStorage.removeItem("chatStorage"),location.reload()}function u(){const d=document.getElementById("fileInput");d&&d.click()}return(d,g)=>(A(),Q("div",it,[r("div",ot,[r("div",lt,[r("span",null,[S("🌼 尊敬的 "),r("span",rt,R(c(f).email),1),S(" 您好，您当前为 "),r("span",ct,R(s.value.level),1),S("，今日剩余可用对话次数为："),r("span",ut,R(s.value.freeRemainingTimes+s.value.cardRemainingTimes),1),S(" 次，其中包括免费次数 "),r("span",dt,R(s.value.freeRemainingTimes),1),S(" 次，次卡套餐 "),r("span",ft,R(s.value.cardRemainingTimes),1),S(" 次（💡 若在过程中出现无结果或异常，将不会扣除您的次数）")])]),pt,r("div",vt,[mt,r("div",ht,[v(c(oe),{value:$.value,"onUpdate:value":g[0]||(g[0]=p=>$.value=p),placeholder:""},null,8,["value"])]),v(c(M),{size:"tiny",text:"",type:"primary",onClick:g[1]||(g[1]=p=>G({name:$.value}))},{default:h(()=>[S(R(d.$t("common.save")),1)]),_:1})]),r("div",{class:le(["flex items-center space-x-4",c(a)&&"items-start"])},[r("span",gt,R(d.$t("setting.chatHistory")),1),r("div",yt,[v(c(M),{size:"small",onClick:w},{icon:h(()=>[v(c(j),{icon:"ri:download-2-fill"})]),default:h(()=>[S(" "+R(d.$t("common.export")),1)]),_:1}),r("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:z},null,32),v(c(M),{size:"small",onClick:u},{icon:h(()=>[v(c(j),{icon:"ri:upload-2-fill"})]),default:h(()=>[S(" "+R(d.$t("common.import")),1)]),_:1}),v(c(Te),{placement:"bottom",onPositiveClick:b},{trigger:h(()=>[v(c(M),{size:"small"},{icon:h(()=>[v(c(j),{icon:"ri:close-circle-line"})]),default:h(()=>[S(" "+R(d.$t("common.clear")),1)]),_:1})]),default:h(()=>[S(" "+R(d.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),r("div",_t,[bt,r("div",St,[(A(),Q(re,null,ce(_,p=>v(c(M),{key:p.key,size:"small",type:p.key===c(m)?"primary":void 0,onClick:k=>c(n).setTheme(p.key)},{icon:h(()=>[v(c(j),{icon:p.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),r("div",xt,[wt,r("div",Rt,[v(c(De),{style:{width:"140px"},value:c(y),options:B,onUpdateValue:g[2]||(g[2]=p=>c(n).setLanguage(p))},null,8,["value"])])])])]))}}),$t={class:"p-4 space-y-4"},kt={class:"items-center clear"},Nt={class:"flex items-center space-x-4"},Bt={class:"flex-1"},Gt=V({__name:"About",setup(e){const n=ie(),t=C(""),a=x(()=>s.value||!t.value||t.value.trim()===""),i=C({website:"",register:""}),s=C(!1);async function o(){try{s.value=!0;const{data:y}=await je();i.value=y}finally{s.value=!1}}const l=C(null),m=C();async function f(){try{s.value=!0;const{data:y}=await Ae();m.value=y}finally{s.value=!1}}const $=async()=>{await Ve(t.value).then(y=>{var _;y.status==="Success"?(n.success(y.message),location.reload()):((_=l.value)==null||_.focus(),n.error(y.message))})};return J(()=>{f(),o()}),(y,_)=>(A(),q(c(nt),{show:s.value},{default:h(()=>[r("div",$t,[v(c(Ze),{"x-gap":"12",cols:2},{default:h(()=>[(A(!0),Q(re,null,ce(m.value,(B,G)=>(A(),q(c(Xe),null,{default:h(()=>[v(c(Me),{class:le({"mt-2":G>1}),title:B.name,hoverable:"",size:"medium"},{default:h(()=>[r("div",null,R(B.price)+"元",1)]),_:2},1032,["class","title"])]),_:2},1024))),256))]),_:1}),r("div",kt,[r("span",null,"🌼 请联系客服QQ ："+R(i.value.website.qq)+" 购买卡密并在下面进行核销",1)]),r("div",Nt,[r("div",Bt,[v(c(oe),{ref_key:"cardNoRef",ref:l,value:t.value,"onUpdate:value":_[0]||(_[0]=B=>t.value=B),placeholder:"卡密"},null,8,["value"])]),v(c(M),{type:"success",disabled:c(a),onClick:$},{default:h(()=>[S(" 核销 ")]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}}),zt={class:"ml-2"},It={class:"min-h-[100px]"},Et=r("span",{class:"ml-2"},"套餐",-1),Dt=V({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const t=e,a=C("General"),i=x({get(){return t.visible},set(s){n("update:visible",s)}});return(s,o)=>(A(),q(c(Ue),{show:c(i),"onUpdate:show":o[1]||(o[1]=l=>Pe(i)?i.value=l:null),title:"个人中心","auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:h(()=>[r("div",null,[v(c(Le),{value:a.value,"onUpdate:value":o[0]||(o[0]=l=>a.value=l),type:"line",animated:""},{default:h(()=>[v(c(ee),{name:"General",tab:"General"},{tab:h(()=>[v(c(j),{class:"text-lg",icon:"ri:file-user-line"}),r("span",zt,R(s.$t("setting.general")),1)]),default:h(()=>[r("div",It,[v(Ct)])]),_:1}),v(c(ee),{name:"Config",tab:"Config"},{tab:h(()=>[v(c(j),{class:"text-lg",icon:"ri:list-settings-line"}),Et]),default:h(()=>[v(Gt)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{Dt as default};
